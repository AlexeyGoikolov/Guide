@model IssueStepsViewModel

@{
    ViewBag.Title = "Подробно о задаче";
    Layout = "_Layout";
}

<div class="page">
    <div class="pageheader">

        <h2>@ViewBag.Title</h2>

        <div class="page-bar">

            <ul class="page-breadcrumb">
                <li>
                    <a asp-action="Details" asp-controller="Account"><i class="fa fa-home"></i> Guide</a>
                </li>
                <li>
                    <a href='javascript:history.go(-1)'>@Model.Back</a>
                 </li>
                <li>
                 <a asp-action="Details" asp-controller="IssuesManage" asp-route-id="@Model.Issue.Id">@ViewBag.Title</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="page-tables-datatables panel-body p-0">
        <section class="tile time-simple">

            <!-- tile body -->
            <div class="tile-body">

                <!-- row -->
                <div class="row">
                    <div class="col-md-10">
                        <h2 class="custom-font mt-0 mb-5">@Model.Issue.Name </h2>
                        <div class="desc text-default lt mb-20 mt-20 material_content">
                            @Html.Raw(Model.Issue.IssueDescription)
                            <h2 style="color: #0c5460">Шаги для выполнения задачи :</h2>
                            @if (Model.DesignatedSteps.Count > 0)
                            {
                                int i = 0;
                                @foreach (var step in Model.DesignatedSteps)
                                {
                                    i++;
                                    <h3>
                                        <a asp-action="Edit" asp-controller="StepsManage" asp-route-id="@step.Id">
                                            @i - @step.Name
                                        </a>
                                        <a class="btn btn-rounded-20 btn-default btn-sm mr-5 p-5" style="width:30px;" role="button" tabindex="0"
                                           title="Удалить" asp-action="Delete" asp-controller="StepsManage" asp-route-id="@step.Id">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </h3>
                                }
                            }
                            <h2 style="color: #0c5460">Желаемые результаты выполнения задачи:</h2>
                            @if (Model.DesiredResults.Count > 0)
                            {
                                @foreach (var dr in Model.DesiredResults)
                                {
                                    <h4>
                                        # @dr.Number - @dr.Name
                                        <a class="btn btn-rounded-20 btn-default btn-sm mr-5 p-5" style="width:30px;" role="button" tabindex="0"
                                           title="Удалить" asp-action="DeleteFromIssue"
                                           asp-controller="DesiredResult" asp-route-drId="@dr.Id" asp-route-issueid="@Model.Issue.Id">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </h4>
                                }
                            }
                            
                        </div>

                    </div>
                    <div class="col-md-2">
                        <a class="btn btn-info" asp-action="Edit" asp-controller="IssuesManage" asp-area="Admin" asp-route-id="@Model.Issue.Id">Редактировать</a>
                    </div>
                </div>
            </div>
           
            <!-- /tile body -->
            
        </section>
    </div>
</div>
